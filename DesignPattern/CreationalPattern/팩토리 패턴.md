### 팩토리 패턴

팩토리 패턴은 생성 패턴 중 하나로 좀 더 구체적인 용어는 팩토리 메소드 패턴이다. 

- 생성 패턴?
    
    생성패턴은 인스턴스를 만드는 절차를 추상화하는 패턴으로 객체를 생성, 합성하는 방법이나 객체의 표현 방법을 시스템과 분리해준다. 
    
    생선 패턴에서는 중요한 이슈가 두 가지 있다.
    
    1. 생성 패턴은 시스템이 어떤 Concrete Class를 사용하는지에 대한 정보를 캡슐화한다.
    2. 생성 패턴은 이들 클래스의 인스턴스들이 어떻게 만들고 어떻게 결합하는지에 대한 부분을 완전히 가려준다.
    
    즉, 생성 패턴을 이용하면 무엇이 생성되고, 누가 이것을 생성하며, 이것이 어떻게 생성되는지, 언제 생성할 것인지 결정하는 데 유연성을 확보할 수 있게 된다. 
    

팩토리 메소드 패턴이란 부모 클래스에서 객체들을 생성할 수 있는 인터페이스를 제공하지만, 자식 클래스들이 생성될 객체들의 유형을 변경할 수 있도록 하는 생성 패턴이다. 다시 말해 여러 개의 자식 클래스를 가진 부모 클래스가 있을 때 인풋에 따라 하나의 자식 클래스의 인스턴스를 리턴하는 방식이다. 

### 팩토리 패턴의 구조

![structure-indexed](https://github.com/isprogrammingfun/TIL/assets/78543382/a6be75c5-bfdd-4632-b9b8-88b1cdf56968)

팩토리 패턴의 구조는 다음과 같다.

1. Product : 팩토리 메소드로 생성될 객체의 인터페이스를 선언한다. 
2. Concrete Product : Product 클래스를 상속하며, 실제 객체를 구현한다. 
3. Creator : 새로운 Product 객체들을 반환하는 팩토리 메서드를 선언한다. 
4. ConcreteCreator : Creator 클래스를 상속하며, 팩토리 메서드를 구현해 객체를 생성한다. 

### 언제 사용하는가?

- 함께 작동해야 하는 객체들의 정확한 유형들과 의존관계들을 미리 모르는 경우
    - 팩토리 메서드는 제품 생성 코드를 제품을 실제로 사용하는 코드와 분리하기 때문에 제품 생성자 코드를 나머지 코드와는 독립적으로 확장하기 쉬워진다.
- 라이브러리 또는 프레임워크의 사용자들에게 내부 컴포넌트들을 확장하는 방법을 제공하려고 하는 경우
    - 상속은 라이브러리나 프레임워크의 디폴트 행동을 확장하는 가장 쉬운 방법 중 하나일 것이다. 따라서 프레임워크 전체에서 컴포넌트들을 생성하는 코드를 단일 팩토리 메소드로 줄인 후, 누구나 팩토리 메서드를 오버라이드 할 수 있게 하면, 확장성이 높아진다.
- 기존 객체들을 매번 재구축하는 대신 이들을 재사용하여 시스템 리소스를 절약하고 싶을 경우
    - 이런 요구 사항은 데이터페이스 연결, 파일 시스템 및 네트워크 같은 시스템 지원을 많이 사용하는 대규모 객체들을 처리할 때 자주 발생한다.
    - 상황에 따라 적절한 객체를 생성하는 코드는 자주 중복될 수 있다. 그리고 객체 생성 방식의 변화는 해당되는 모든 코드 부분을 변경해야 하는 문제가 발생한다.
    - 따라서 객체의 생성 코드를 별도의 클래스 / 메서드로 분리 함으로써 객체 생성의 변화에 대해 대비를 하기 위해 팩토리 메서드 패턴을 이용한다.

### 패턴 장점

- 생성자와 구현 객체의 강한 결합을 피할 수 있다.
- 캡슐화, 추상화를 통해 객체의 구체적인 타입을 감출 수 있다.
- 단일 책임 원칙을 준수한다.
- 개방/폐쇄 원칙을 준수한다.

### 패턴 단점

- 각 구현체마다 객체들을 모두 구현해줘야 하기 때문에 구현체가 늘어날 때 마다 서브 클래스 수가 증가한다.
- 코드의 복잡성이 증가한다.

### 참고자료

[https://inpa.tistory.com/entry/GOF-💠-팩토리-메서드Factory-Method-패턴-제대로-배워보자](https://inpa.tistory.com/entry/GOF-%F0%9F%92%A0-%ED%8C%A9%ED%86%A0%EB%A6%AC-%EB%A9%94%EC%84%9C%EB%93%9CFactory-Method-%ED%8C%A8%ED%84%B4-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EB%B0%B0%EC%9B%8C%EB%B3%B4%EC%9E%90) 

https://refactoring.guru/ko/design-patterns/factory-method